<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flight DB</title>
<script type="text/javascript" src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"></script>
<script type="text/javascript" src="https://unpkg.com/web3@0.20.5/dist/web3.min.js"></script>
</head>
<body>
<script type="text/javascript">

  var Web3 = require('web3');
  if (typeof web3 !== 'undefined') {
    web3 = new Web3(web3.currentProvider);
    console.log('default provider');
  } else {
    // Set the provider you want from Web3.providers
    //web3 = new Web3(new Web3.providers.HttpProvider("http://127.0.0.1:8545"));
    web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/d10444a39d524e3a9567c81ad333070a"));
    console.log('custom provider');
  }
  //web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/d10444a39d524e3a9567c81ad333070a"));
  console.log(web3);

  // var addr = '0xD2E85464C5Ad682161b2df85249204D6F00142e9'
  // web3.eth.getBalance(addr, 'latest', function (error, result) {
  //   if (!error)
  //     console.log(JSON.stringify(result));
  //   else
  //     console.error(error);
  // });
  //console.log(b.toString(10));

  var cnt_abi = [{ "inputs": [{ "internalType": "string", "name": "initMessage", "type": "string" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "constant": false, "inputs": [{ "internalType": "string", "name": "newMessage", "type": "string" }], "name": "update", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "message", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }]
  var cnt_addr = '0x2BD71119066e40278ec16efA6F3F20C5a3eB9e2D'

  var contract = web3.eth.contract(cnt_abi)
  var hw = contract.at(cnt_addr)
  console.log(hw)

  // hw.message(function (error, result) {
  //   console.log(result)
  // });

  hw.update('asdf');

  //.balance.request(address, (err, result) => { console.log(result) }));


  // const contract = new web3.eth.Contract(cnt_abi, cnt_addr)
  // contract.methods.totalSupply().call((err, result) => { console.log(result) })



  // var coinbase = web3.eth.coinbase;
  // console.log(coinbase);
  // var balance = web3.eth.getBalance(coinbase);
  // console.log(balance);

  // console.log(web3.eth.accounts);

</script>
</body>
</html>
